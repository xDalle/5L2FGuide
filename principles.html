<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Principles Game</title>
    <link rel="stylesheet" href="styles.css">
	<link rel="shortcut icon" href="favicon.ico" />
</head>
<body>
    <header>
        <a href="index.html" class="nav-logo"> <img src="small_logo.png" alt="Logo" class="logo"> </a>
        <nav class="navbar">
            <a href="index.html">Introduction</a>
            <a href="scope.html">Scope</a>
            <a href="definitions.html">Definitions</a>
            <a href="principles.html">Principles</a>
            <a href="rights.html">Rights</a>
			<a href="challenges.html">Challenges</a>
            <a href="about.html">About</a>
        </nav>
    </header>

    <main>
		<div class="centered-container">
			<h2 class="select-info" id="select-info">Select which <strong>Principles</strong> your organization needs to comply with.</h2>
			<h2 class="select-info" id="selected-info" style="display:none;">You have selected the following <strong>Principles</strong> for compliance:</h2>
			<button class="assert-button" id="assert-button">Check</button>
			<button class="play-again-button" id="play-again-button">Play Again</button>
		</div>
        <div id="cards-container">
        </div>
		<div id="results" class="results-container"></div>

    </main>

    <footer class="footer">
        <p><a href="http://creativecommons.org/licenses/by/4.0/" rel="license"><img style="border-width: 0;" src="https://i.creativecommons.org/l/by/4.0/80x15.png" alt="Creative Commons License" /><br />
        </a><br />
            Unless otherwise stated, the contents are licensed under
          <a href="http://creativecommons.org/licenses/by/4.0/" rel="license">Creative Commons Attribution 4.0 &#8211; International</a>. 
          The authors are responsible for the choice and presentation of their texts on this site and for the opinions expressed. <a class="link" href="https://github.com/xDalle/5L2FGuide">Source</a>.</p>
    </footer>

    <script>
		const assertButton = document.getElementById('assert-button');
		const selectInfo = document.getElementById('select-info');

		assertButton.classList.add('disabled');
		assertButton.disabled = true;

		const principles = [
			"#1 Purpose",
			"#2 Adequacy",
			"#3 Needs",
			"#4 Open Access",
			"#5 Data Quality",
			"#6 Transparency",
			"#7 Security",
			"#8 Prevention",
			"#9 Non-Discrimination",
			"#10 Accountability"
		];

		const subtitles = [
			"\"realization of the processing for legitimate, specific, explicit purposes and informed to the holder, without the possibility of further processing in a way that is incompatible with these purposes.\"",
			"\"compatibility of the treatment with the purposes informed to the holder, according to the context of the treatment.\”",
			"\"limitation of treatment to the minimum necessary to achieve its purposes, with the coverage of relevant, proportional and not excessive data in relation to the purposes of data processing.\”",
			"\"guarantee, to data holders, of facilitated and free consultation on the form and duration of the treatment, as well as on the completeness of their personal data.\”",
			"\"guarantee, to the data holders, of accuracy, clarity, relevance and updating of the data, according to the need and for the fulfillment of the purpose of its treatment.\”",
			"\"guarantee, to the holders, of clear, accurate and easily accessible information about the execution of the treatment and the respective treatment agents, observing the commercial and industrial secrets.\”",
			"\"use of technical and administrative measures capable of protecting personal data from unauthorized access and from accidental or unlawful situations of destruction, loss, alteration, communication or dissemination.\”",
			"\"adoption of measures to prevent the occurrence of damages due to the processing of personal data.\”",
			"\"impossibility of carrying out the treatment for unlawful or abusive discriminatory purposes.\”",
			"\"demonstration, by the agent, of the adoption of effective measures capable of proving fulfillment with and compliance with the rules for the protection of personal data, and even the effectiveness of these measures.\”",
		];

		const infos = [
			"• GDPR equivalent: Purpose Limitation\n• ADPPA equivalent: Data Minimization\n• Privacy Act equivalent: Direct marketing / Use or disclosure of personal information\n• CCPA equivalent: Right to Know What Personal Information is Being Collected. Right to Access Personal Information (it is an individual Right!)",
			"• GDPR equivalent: Storage Limitation\n• ADPPA equivalent: Data Minimization\n• Privacy Act equivalent: Use or disclosure of personal information\n• CCPA equivalent: not explicity declared",
			"• GDPR equivalent: Data Minimization\n• ADPPA equivalent: Data Minimization\n• Privacy Act equivalent: Collection of solicited personal information\n• CCPA equivalent: Right to Delete / Right to Opt Out (it is an individual Right!)",
			"• GDPR equivalent: Right of Access (it is an individual Right!)\n• ADPPA equivalent: Executive Responsibility (large data holders only)\n• Privacy Act equivalent: Access to personal information / Notification of the collection of personal information\n• CCPA equivalent: Right to Know What Personal Information is Being Collected. Right to Access Personal Information (it is an individual Right!)",
			"• GDPR equivalent: Accuracy\n• ADPPA equivalent: Right of Correction (it is an individual Right!)\n• Privacy Act equivalent: Quality of personal information / Correction of personal information\n• CCPA equivalent: -",
			"• GDPR equivalent: Lawfulness, fairness and transparency\n• ADPPA equivalent: Right of Transparency (it is an individual Right!)\n• Privacy Act equivalent: Open and transparent management of personal information\n• CCPA equivalent: Right to Know What Personal Information is Being Collected. Right to Access Personal Information (it is an individual Right!)",
			"• GDPR equivalent: Integrity and confidentiality\n• ADPPA equivalent: Right of Data Security (it is an individual Right!)\n• Privacy Act equivalent: Security of personal information\n• CCPA equivalent: Security procedures and practices (not a Principle!)",
			"• GDPR equivalent: Restrictions (it is an individual Right!)\n• ADPPA equivalent: Data Minimization\n• Privacy Act equivalent: Security of personal information\n• CCPA equivalent: Security procedures and practices (not a Principle!)",
			"• GDPR equivalent: Restrictions (it is an individual Right!)\n• ADPPA equivalent: Data Minimization\n• Privacy Act equivalent: -\n• CCPA equivalent: Right of No Retaliation (it is an individual Right!)",
			"• GDPR equivalent: Accountability\n• ADPPA equivalent: Executive Responsibility (large data holders only)\n• Privacy Act equivalent: -\n• CCPA equivalent: Right of No Retaliation (it is an individual Right!)"
		];

		const pbDMessages = [
			"Purpose = Principle 1: Proactive not Reactive; Preventative not Remedial - This principle emphasizes the need for proactive measures to protect privacy, rather than reactive ones.",
			"Adequacy = Principle 2: Privacy as the Default Setting - This principle ensures that the default configuration of any system is privacy-friendly.",
			"Necessity = Principle 3: Privacy Embedded into Design - Privacy should be integrated into the design and architecture of information systems and business practices.",
			"Free Access = Principle 6: Visibility and Transparency - Organizations should make their data practices transparent to users.",
			"Data Quality = Principle 4: Full Functionality: Positive-Sum, not Zero-Sum - This principle advocates for achieving both privacy and functionality.",
			"Transparency = Principle 6: Visibility and Transparency - Organizations should make their data practices transparent to users.",
			"Security = Principle 5: End-to-End Protection - Data must be secured against unauthorized access and breaches.",
			"Prevention = Principle 1: Proactive not Reactive; Preventative not Remedial - This principle emphasizes the need for proactive measures to protect privacy, rather than reactive ones.",
			"",
			"Accountability = Principle 7: Respect for User Privacy - Organizations should respect and uphold users' privacy throughout the data lifecycle."
		];

		const isoMessages = [
			"Purpose = Purpose legitimacy and specification: Personal data should be collected for specific, legitimate purposes that are clearly communicated to the individual.",
			"Adequacy = Purpose legitimacy and specification: Personal data should be collected for specific, legitimate purposes that are clearly communicated to the individual.",
			"Necessity = Collection limitation: Organizations should limit the collection of personal data to what is strictly necessary for the specified purpose, avoiding unnecessary data collection.",
			"Free Access = Openness, transparency and notice: Individuals should have access to clear information about how their data is being collected and processed, promoting transparency in data handling practices.",
			"Data Quality = Accuracy and quality: Organizations must ensure that personal data is accurate, complete, and kept up to date. Data should be maintained in a way that aligns with the purpose of collection.",
			"Transparency = Openness, transparency and notice: Individuals should have access to clear information about how their data is being collected and processed, promoting transparency in data handling practices.",
			"Security = Information security: Adequate security measures should be in place to protect personal data from unauthorized access, loss, or breach, ensuring its confidentiality and integrity.",
			"Prevention = Information security: Organizations should adopt measures that prevent harm to individuals resulting from the misuse or improper handling of personal data. This includes assessing risks and taking proactive steps to mitigate them.",
			"Non-Discrimination = Collection limitation: Data handling practices must be fair, treating individuals equitably without discrimination, ensuring compliance with legal obligations.",
			"Accountability = Accountability: Organizations are responsible for ensuring compliance with data privacy standards and must be able to demonstrate accountability in their data processing activities."
		];

		const pbDPrinciples = [1, 2, 3, 4, 5, 6, 7, 8, 10];
		const isoPrinciples = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

		const combinedPrinciples = [...new Set([...pbDPrinciples, ...isoPrinciples])];

		const cardsContainer = document.getElementById('cards-container');
		let selectedCards = [];

		function updateButtonState() {
			if (selectedCards.length > 0) {
				assertButton.classList.remove('disabled');
				assertButton.classList.add('enabled');
				assertButton.disabled = false;
			} else {
				assertButton.classList.remove('enabled');
				assertButton.classList.add('disabled');
				assertButton.disabled = true;
			}
		}

		function createCards() {
			principles.forEach((principle, index) => {
				const card = document.createElement('div');
				card.className = 'card';
				
				const [title] = principle.split(': ');
				
				const cardTitle = document.createElement('div');
				cardTitle.className = 'card-title';
				cardTitle.textContent = title;

				const cardSubtitle = document.createElement('div');
				cardSubtitle.className = 'card-subtitle';
				cardSubtitle.textContent = subtitles[index];

				const cardText = document.createElement('div');
				cardText.className = 'card-text';
				cardText.innerHTML = infos[index].replace(/\n/g, '<br>');

				card.appendChild(cardTitle);
				card.appendChild(cardSubtitle);
				card.appendChild(cardText);

				card.addEventListener('click', () => {
					card.classList.toggle('selected');
					if (selectedCards.includes(index)) {
						selectedCards.splice(selectedCards.indexOf(index), 1);
					} else {
						selectedCards.push(index);
					}
					updateButtonState();
				});

				cardsContainer.appendChild(card);
			});
		}

		function displayResults() {
			const selectedPrinciples = selectedCards.map(index => index + 1);
			const totalSelected = selectedPrinciples.length;

			const selectedPbDCount = selectedPrinciples.filter(p => pbDPrinciples.includes(p)).length;
			const selectedISOCount = selectedPrinciples.filter(p => isoPrinciples.includes(p)).length;

			const pbDPercentage = totalSelected > 0 ? ((selectedPbDCount / totalSelected) * 100).toFixed(2) : 0;
			const isoPercentage = totalSelected > 0 ? ((selectedISOCount / totalSelected) * 100).toFixed(2) : 0;

			const pbDFound = selectedPrinciples.filter(p => pbDPrinciples.includes(p));
			const pbDNotFound = selectedPrinciples.filter(p => !pbDPrinciples.includes(p));
			
			const isoFound = selectedPrinciples.filter(p => isoPrinciples.includes(p));
			const isoNotFound = selectedPrinciples.filter(p => !isoPrinciples.includes(p));
			
			const combinedFound = selectedPrinciples.filter(p => combinedPrinciples.includes(p));
			
			const pbDMessagesFound = pbDFound.map(index => pbDMessages[index - 1]);
			const isoMessagesFound = isoFound.map(index => isoMessages[index - 1]);

			const selectedCombinedCount = selectedPrinciples.filter(p => combinedPrinciples.includes(p)).length;
			const combinedPercentage = totalSelected > 0 ? ((selectedCombinedCount / totalSelected) * 100).toFixed(2) : 0;

			return { 
				pbDPercentage, 
				isoPercentage, 
				combinedPercentage, 
				pbDFound, 
				pbDNotFound, 
				isoFound, 
				isoNotFound,
				combinedFound,
				pbDMessagesFound,
				isoMessagesFound
			};
		}

		document.getElementById('assert-button').addEventListener('click', () => {
			if (selectedCards.length > 0) {
				const resultsDisplay = document.getElementById('results');
				const selectInfo = document.querySelector('.select-info');

				document.getElementById('select-info').style.display = 'none';
				document.getElementById('selected-info').style.display = 'block';

				if (resultsDisplay) {
					resultsDisplay.innerHTML = '';
				} else {
					resultsDisplay = document.createElement('div');
					resultsDisplay.id = 'results';
					document.body.appendChild(resultsDisplay);
				}

				cardsContainer.innerHTML = '';
				selectedCards.sort((a, b) => a - b);

				selectedCards.forEach(index => {
					const card = document.createElement('div');
					card.className = 'card selected';

					const title = principles[index];
					const subtitle = subtitles[index];
					const content = infos[index].replace(/\n/g, '<br>');
					card.innerHTML = `
						<div class="card-title">${title}</div>
						<div class="card-subtitle">${subtitle}</div>
						<div class="card-text">${content}</div>
					`;

					cardsContainer.appendChild(card);
				});

				const { 
					pbDPercentage, 
					isoPercentage, 
					combinedPercentage, 
					pbDFound, 
					pbDNotFound, 
					isoFound, 
					isoNotFound,
					combinedFound,
					pbDMessagesFound,
					isoMessagesFound
				} = displayResults();

				resultsDisplay.innerHTML = `
                    <h3>Results of the selected <strong>Principles</strong>:</h3>
                    <p><span>&#8226;</span> Privacy by Design: <span class="highlight">${pbDPercentage}%</span></p>
                    <div class="principles-list">Principles found (Privacy by Design): {${pbDFound.join(', ')}}</div>
                    ${pbDMessagesFound.length > 0 ? `<p>Equivalence on Privacy by Design: <br> ${pbDMessagesFound.join('<br>')}</p>` : ''}
                    <p><span>&#8226;</span> ISO/IEC 29100: <span class="highlight">${isoPercentage}%</span></p>
                    <div class="principles-list">Principles found (ISO): {${isoFound.join(', ')}}</div>
                    ${isoMessagesFound.length > 0 ? `<p>Equivalence on ISO/IEC 29100: <br> ${isoMessagesFound.join('<br>')}</p>` : ''}
                    <p><span>&#8226;</span> Combined frameworks: <span class="highlight">${combinedPercentage}%</span></p>
                    <div class="principles-list">Principles found (Combined): {${combinedFound.join(', ')}}</div>
                `;

				document.getElementById('selected-info').style.display = 'block';
				document.getElementById('select-info').style.display = 'none';

				document.getElementById('play-again-button').style.display = 'inline-block';
				document.getElementById('assert-button').style.display = 'none';

			}		
		});

		document.getElementById('play-again-button').addEventListener('click', () => {
			cardsContainer.innerHTML = '';
			selectedCards = [];
			document.getElementById('assert-button').style.display = 'inline-block';
			document.getElementById('play-again-button').style.display = 'none';

			document.getElementById('results').innerHTML = '';
			document.getElementById('select-info').style.display = 'block';
			document.getElementById('selected-info').style.display = 'none';

			const selectInfo = document.querySelector('.select-info');
			selectInfo.style.visibility = 'visible';

			createCards();
			updateButtonState();
		});

		createCards();
		updateButtonState();
	</script>
</body>
</html>